# 产品需求文档（PRD）- 数学物理题目分享网站

## 1. 文档信息

- 产品名称：数学物理题目分享网站（暂定名：Vegetable Forum）
- 文档版本：V0.1
- 编写日期：2026-01-28
- 目标读者：产品、设计、研发、测试、运营

## 2. 背景与目标

### 2.1 背景

数学/物理学习与竞赛训练中，题目本身具有强“可复用性”。但题目的整理与分享常常分散在聊天记录、网盘、纸质笔记中，难以检索与复盘。用户希望能：

- 将题目按“学科 → 主题 → 题型/方法”整理归纳；
- 将题目与解法分享给他人（链接分享、公开集合）；
- 由管理员/运营手动推送“每日一题”，形成连续学习的节奏与社区讨论氛围。

### 2.2 产品目标

- 建立可持续的题目库：支持发布题目与解答、按分类题型组织、可检索可分享；
- 形成学习路径：通过“题型/分类/题单（集合）”沉淀结构化知识；
- 建立内容触达机制：手动推送“每日一题”到所有用户可见位置（并可扩展通知渠道）。

### 2.3 非目标（暂不做）

- 自动生成题目/自动推送（由算法决定每日一题）；
- 复杂题目排版编辑器的全量实现（例如 LaTeX 所见即所得、几何画板等）；
- 完整的社交系统（关注、私信、排行榜等）；
- 题目版权自动识别与侵权检测（仅提供管理审核与投诉入口）。

### 2.4 成功指标（建议）

MVP 阶段建议关注以下指标，作为是否达到“可用且有价值”的判断依据：

- 内容供给：累计题目数、累计题单数、每日一题发布次数
- 内容消费：题目详情 UV、题单详情 UV、搜索使用次数
- 结构化沉淀：按分类/题型浏览占比、题单创建与分享占比
- 活跃节奏：连续发布每日一题的天数、每日一题点击率

### 2.5 关键假设（用于验证）

- 用户愿意用“分类/题型/题单”来整理题目，而不是仅靠搜索；
- “每日一题”能显著提升回访与讨论；
- 图文即可满足 MVP 的题目表达需求（公式与复杂排版后续迭代）。

## 3. 术语与定义

- 题目（Problem）：包含题干、答案/解法、难度、学科、标签等信息的内容单元。
- 学科：数学/物理（后续可扩展化学等）。
- 分类（Category）：用于结构化组织题目；支持层级结构（父子分类）。
- 题型（Type）：更偏“解题方法/题目形态”的归类维度（可与分类并存）。
- 题单/合集（Collection）：用户自定义的题目集合，可公开分享。
- 每日一题（Daily Problem）：运营/管理员手动选择并发布到每日一题栏目的一道题。
- 标签（Tag）：轻量化的关键词，用于补充分类/题型（例如“柯西不等式”“高斯定理”）。

## 4. 用户角色与权限

### 4.1 用户角色

- 游客：未登录用户，可浏览公开内容、搜索、查看每日一题。
- 注册用户：可收藏、创建题单、提交题目（草稿/待审核）、评论（可选）。
- 作者（增强角色）：可发布题目/解法、维护自己的内容、管理自己的题单。
- 管理员/运营：审核与管理全站内容；配置分类题型；手动推送每日一题；处理举报。

### 4.2 权限概览（MVP）

- 游客：只读（公开内容）
- 登录用户：创建/编辑自己的题目草稿、题单；发起分享链接
- 管理员：全量 CRUD + 审核 + 每日一题推送 + 分类题型配置

### 4.3 权限矩阵（MVP）

说明：下表为最小可用权限建议，可按实际落地再细化（例如“仅链接”访问策略）。

| 功能 | 游客 | 登录用户 | 作者（本人内容） | 管理员 |
| --- | --- | --- | --- | --- |
| 浏览公开题目/题单 | ✅ | ✅ | ✅ | ✅ |
| 搜索公开内容 | ✅ | ✅ | ✅ | ✅ |
| 创建题单 | ❌ | ✅ | ✅ | ✅ |
| 编辑/删除自己的题单 | ❌ | ✅ | ✅ | ✅ |
| 新建题目（草稿） | ❌ | ✅ | ✅ | ✅ |
| 提交题目审核/发布 | ❌ | ✅ | ✅ | ✅ |
| 编辑/下架自己的题目 | ❌ | ❌ | ✅ | ✅ |
| 审核/下架全站题目 | ❌ | ❌ | ❌ | ✅ |
| 配置分类/题型 | ❌ | ❌ | ❌ | ✅ |
| 推送每日一题 | ❌ | ❌ | ❌ | ✅ |

## 5. 需求范围与核心功能

### 5.1 内容模型（核心字段建议）

#### 5.1.1 题目（Problem）

- 基础信息：标题、学科（数学/物理）、难度（1-5）、来源（自拟/教材/竞赛/网络等）、是否原创
- 内容：题干（文本/图片）、解答（文本/图片，可多解法）
- 组织信息：分类（可多选）、题型（可多选）、标签（可多选）
- 归属与状态：作者、发布时间、状态（草稿/待审核/已发布/已下架）
- 分享：公开可见性（公开/仅链接/私有）

#### 5.1.2 分类（Category）

- 名称、父级分类、排序、是否启用
- 典型结构示例：
  - 数学
    - 代数
      - 方程与不等式
    - 几何
  - 物理
    - 力学
    - 电磁学

#### 5.1.3 题型（Type）

- 名称、适用学科（可选）、说明、排序、是否启用
- 示例：
  - 数学：构造、放缩、代换、分类讨论、反证法、数形结合、归纳法
  - 物理：受力分析、能量守恒、动量守恒、等效电路、场强叠加

#### 5.1.4 题单/合集（Collection）

- 名称、简介、作者、可见性（公开/仅链接/私有）
- 题目列表（有序，可拖拽排序）
- 分享链接（可选：短链/口令）

#### 5.1.5 每日一题（Daily Problem）

- 日期（唯一）、引用题目（ProblemId）或内嵌题目（MVP 推荐引用）
- 发布状态（未发布/已发布/已撤回）
- 运营文案（可选：推荐理由、提示）

### 5.2 核心业务流程

#### 5.2.1 用户整理归纳题型

1) 用户浏览题目 → 通过分类/题型筛选；
2) 用户将题目加入题单（按“题型/章节/训练目标”组织）；
3) 用户分享题单链接给他人。

#### 5.2.2 用户分享题目

1) 用户发布题目（公开/仅链接）；
2) 系统生成可访问链接；
3) 他人可通过链接查看题目与解法并进一步收藏/加入题单。

#### 5.2.3 手动推送每日一题

1) 管理员进入“每日一题”后台；
2) 选择日期 → 选择题目（可搜索/筛选）→ 填写运营文案；
3) 点击发布：
   - 前台“每日一题”页展示；
   - 首页/推荐位展示（MVP：首页模块）；
   - 可选：站内消息/订阅通知（后续迭代）。

### 5.3 信息架构与页面清单（MVP）

建议的前台信息架构：

- 首页
  - 今日每日一题（模块）
  - 推荐分类/题型入口（模块）
  - 最新题目（模块）
- 题目
  - 题目列表（筛选/排序/分页）
  - 题目详情
- 题单
  - 题单列表（可选）
  - 题单详情
- 每日一题
  - 今日每日一题
  - 历史每日一题列表（按日期）
- 我的（登录后）
  - 我的题目（草稿/待审核/已发布）
  - 我的题单

后台（管理员/运营）建议：

- 分类管理
- 题型管理
- 题目审核与管理
- 每日一题管理（选择日期/选择题目/发布撤回）

### 5.4 用户故事（MVP）

- 作为游客，我希望能按“学科+分类+题型”浏览题目，快速找到我要练的题型。
- 作为登录用户，我希望把题目加入题单，并分享题单链接给同学一起练。
- 作为作者，我希望发布题目与解法，并能持续更新内容（不影响分享链接可用）。
- 作为运营，我希望手动选择并发布每日一题，让所有用户每天都能看到并回访。

## 6. 功能需求清单（MVP -> V1）

### 6.1 题目浏览与检索

- 题目列表：
  - 支持按学科、分类、题型、难度、标签筛选
  - 支持排序：最新、最热（可选：浏览/收藏数）
  - 支持分页
- 题目详情：
  - 展示题干、解答、分类/题型/标签
  - 展示作者与发布时间
- 搜索：
  - 关键字搜索（标题/题干/标签，MVP 可先做标题）

验收标准：

- 任意题目可通过“分类+题型+关键字”在 3 次以内过滤到范围；
- 列表分页与排序稳定可用。

### 6.2 题目发布与管理

- 发布题目（登录用户）：
  - 新建题目：题干/解答支持图文（图片上传走对象存储）
  - 选择分类/题型/标签/难度
  - 可见性：公开/仅链接/私有
  - 状态：草稿保存、提交审核（若需要）
- 我的题目：
  - 列表管理（草稿/已发布/待审核）
  - 编辑与更新（已发布内容更新策略：直接更新或版本化，后续决定）
- 管理后台（管理员）：
  - 审核（通过/驳回原因）
  - 下架/删除

验收标准：

- 上传图片后题干/解答可正常展示；
- 私有题目不可被未授权用户访问；
- 仅链接题目可通过链接访问但不出现在公开列表（MVP 可选）。

补充要求（建议明确）：

- 题干/解答编辑支持：
  - 文本（支持换行、代码块）
  - 图片（上传到对象存储）
  - 公式：支持以 LaTeX 源码提交与存储（前端可使用 KaTeX/MathJax 渲染）
  - 书写格式：题干/解答支持两种格式（Markdown / LaTeX），由用户在提交时选择
- 内容变更策略（MVP 建议）：
  - 已发布内容允许编辑，但需记录“更新时间”
  - 后续可扩展“版本历史”与差异对比

### 6.3 分类与题型体系

- 分类管理（管理员）：
  - 新增/编辑/禁用/排序
  - 支持层级结构
- 题型管理（管理员）：
  - 新增/编辑/禁用/排序
  - 与学科关联（可选）
- 题目绑定：
  - 一个题目可绑定多个分类与多个题型（建议支持多选）

验收标准：

- 分类层级展示正确；
- 禁用项不在前台可选项出现（历史数据可保留展示为“已下线”）。

### 6.4 题单/合集（用于“归纳题型并分享”）

- 创建题单（登录用户）：
  - 名称、简介、可见性（公开/仅链接/私有）
  - 添加题目、删除题目、排序
- 浏览题单：
  - 展示题单信息与题目列表
  - 一键复制分享链接

验收标准：

- 题单链接可被其他用户打开并浏览（若公开/仅链接）；
- 题目排序稳定、刷新后不乱序。

### 6.5 每日一题（手动推送）

- 前台：
  - 每日一题入口（首页模块 + 独立页面）
  - 展示：题目标题、学科、难度、题干摘要、运营文案、查看详情入口
  - 历史列表（按日期）
- 后台（管理员/运营）：
  - 选择日期（每个日期最多 1 条）
  - 选择题目（可搜索筛选）
  - 填写运营文案（可选）
  - 发布/撤回/替换（策略：已发布是否允许替换，默认允许但需记录操作日志）

边界与规则（建议明确）：

- 日期与时区：以服务器配置时区为准（默认中国时区）；每日一题按“自然日”归档。
- 当日未发布时：
  - 首页可展示“暂无每日一题”占位文案，或展示最近一次（后续决定，MVP 建议先占位）。
- 替换策略：
  - 允许替换，但必须记录操作人、时间、替换前后题目与文案（便于追责与回溯）。

验收标准：

- 当日“每日一题”必定可被所有用户在首页看到；
- 历史每日一题可按日期检索与回看；
- 同一天不允许出现两条已发布内容。

### 6.6 分享能力

- 题目/题单提供可分享链接（MVP：直接链接）
- 可见性策略：
  - 公开：可被列表/搜索索引
  - 仅链接：不出现在列表/搜索，但知道链接可访问
  - 私有：仅作者与管理员可访问

验收标准：

- 仅链接内容不会被公开列表/搜索返回；
- 私有内容未授权访问返回明确错误。

### 6.7 内容治理与版权（MVP）

- 内容审核：
  - 用户发布题目可走“先发后审”或“先审后发”（需产品决策）
  - 管理员需支持：通过、驳回（填写原因）、下架
- 版权与引用：
  - 题目应提供“来源”字段（教材/竞赛/网络链接/自拟）
  - 提供举报入口（后续实现），管理员可快速下架争议内容
- 反垃圾：
  - 限制短时间内连续发布
  - 限制图片/文本超长，防止刷屏

### 6.8 文件与图片上传（MVP）

为支持题干/解答的图文表达，上传能力建议满足：

- 支持类型：`png/jpg/jpeg/webp`（MVP 建议仅图片）
- 大小限制：单文件 ≤ 5MB（可按环境调整）
- 存储策略：对象存储（MinIO），服务端生成 `objectKey`，并通过预签名 URL 下载
- 安全要求：禁止上传可执行文件；服务端对文件名进行清洗；必要时做图片内容类型校验

## 7. 运营与管理（MVP）

- 内容审核与下架（管理员）
- 举报入口（可选，后续）：用户对题目/评论举报
- 操作日志（建议）：每日一题发布/撤回/替换记录

## 8. 非功能性需求

### 8.1 性能与可用性

- 页面响应：常规列表/详情接口 P95 < 500ms（不含外部网络）
- 可用性：核心读接口可用性目标 99.9%（后续）

### 8.2 安全与风控

- 登录鉴权：JWT
- 防刷：接口限流（登录、上传、搜索等）
- 敏感信息：日志与接口返回禁止泄露
- 上传安全：
  - 限制文件类型与大小（MVP：后端限制 + 前端提示）
  - 防止文件名注入与路径穿越（服务端生成 objectKey）

### 8.3 可观测性

- 请求 traceId（必须）
- 错误日志必须可按 traceId 追踪

### 8.4 SEO 与分享体验（建议）

- 题目/题单详情页建议具备可分享元信息（标题、摘要、封面图）
- 公开内容可被搜索引擎索引（后续）

## 9. 埋点与指标（建议）

- 内容指标：题目数量、题单数量、每日一题发布次数
- 消费指标：日活、题目浏览、题单浏览、分享点击
- 转化指标：游客→注册、注册→发布题目、注册→创建题单

## 10. 迭代规划（建议）

### 10.1 MVP（首版）

- 题目发布/浏览/检索（基础）
- 分类/题型体系（管理员配置）
- 题单/合集（用于整理与分享）
- 每日一题（后台手动推送 + 前台展示）
- JWT 登录、对象存储（图片/附件）

### 10.2 V1.1

- 评论与讨论（围绕每日一题）
- 收藏/点赞/浏览量
- 每日一题订阅通知（站内消息/邮件/第三方渠道）

### 10.3 V2

- 版本化编辑与差异对比
- 高级编辑器（LaTeX、公式渲染、图形）
- 推荐系统/个性化训练路径
